<!DOCTYPE html>
<html>
<head>
    <title>My ALO Diary</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.9.0/showdown.min.js"></script>
</head>
<body>
    <div id="content"></div>
    <div id="content2"></div>
    
    <script>
        var converter = new showdown.Converter();
        
        fetch('https://raw.githubusercontent.com/akulau/ALO-diary/main/README.md')
        .then(response => response.text())
        .then(text => {
            // Convert markdown to HTML
            let html = converter.makeHtml(text);

            // Create a temporary div to manipulate the HTML
            let tempDiv = document.createElement('div');
            tempDiv.innerHTML = html;

            // Change color of all h1 elements
            tempDiv.querySelectorAll('h1').forEach(h1 => {
                h1.style.color = 'red';
            });

            // Get the manipulated HTML and set it as the innerHTML of the content div
            document.getElementById('content').innerHTML = tempDiv.innerHTML;
        });
        
        // Fetch diary entries from 2023-09-17 onwards
        // Start date
        var startDate = new Date(2023, 8, 17); // Months are zero-based

        // Today's date
        var endDate = new Date();
        
        for (var d = startDate; d <= endDate; d.setDate(d.getDate() + 1)) {
            // Construct the filename
            var filename = `${d.getFullYear()}-${(d.getMonth()+1).toString().padStart(2, '0')}-${d.getDate().toString().padStart(2, '0')}.md`;

            fetch(`https://raw.githubusercontent.com/akulau/ALO-diary/main/entries/${filename}`)
            .then(response => {
                if (response.status === 200) {
                    // If the file exists, convert it to HTML and add it to the page
                    response.text().then(text => {
                        let html = converter.makeHtml(text);
                        let div = document.createElement('div');
                        div.innerHTML = html;
                        document.body.appendChild(div);
                    });
                }
            });
        }
    </script>
</body>
</html>
